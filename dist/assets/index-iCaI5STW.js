const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-module-CQxi5vtm.js","assets/vendor-react-D1TfuKJl.js"])))=>i.map(i=>d[i]);
import{r as Ie,a as u,c as hr,_ as Nn,u as pr,j as c,R as _}from"./vendor-react-D1TfuKJl.js";import{v as gr,G as mr,g as br}from"./pdfjs-DkQQlAqH.js";import{P as Mt,d as xr,S as vr,r as we}from"./pdf-lib-CTdV5bOL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var At={},on=Ie;At.createRoot=on.createRoot,At.hydrateRoot=on.hydrateRoot;/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kn=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>u.createElement("svg",{ref:l,...wr,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:kn("lucide",o),...a},[...i.map(([h,f])=>u.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=(e,t)=>{const n=u.forwardRef(({className:r,...o},s)=>u.createElement(Cr,{ref:s,iconNode:t,className:kn(`lucide-${yr(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=L("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=L("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=L("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=L("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=L("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=L("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=L("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=L("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=L("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=L("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=L("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=L("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=L("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=L("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=L("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=L("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=L("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),$t="-",zr=e=>{const t=Pr(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split($t);return a[0]===""&&a.length!==1&&a.shift(),En(a,t)||Fr(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},En=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?En(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join($t);return(i=t.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},ln=/^\[(.+)\]$/,Fr=e=>{if(ln.test(e)){const t=ln.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Pr=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Br(Object.entries(e.classGroups),n).forEach(([s,i])=>{It(i,r,s,t)}),r},It=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:cn(t,o);s.classGroupId=n;return}if(typeof o=="function"){if($r(o)){It(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{It(i,cn(t,s),n,r)})})},cn=(e,t)=>{let n=e;return t.split($t).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$r=e=>e.isThemeGetter,Br=(e,t)=>t?e.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[t+i,a])):s);return[n,o]}):e,Gr=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},Mn="!",Wr=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],s=t.length,i=a=>{const l=[];let h=0,f=0,d;for(let b=0;b<a.length;b++){let w=a[b];if(h===0){if(w===o&&(r||a.slice(b,b+s)===t)){l.push(a.slice(f,b)),f=b+s;continue}if(w==="/"){d=b;continue}}w==="["?h++:w==="]"&&h--}const p=l.length===0?a:a.substring(f),g=p.startsWith(Mn),v=g?p.substring(1):p,m=d&&d>f?d-f:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},_r=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Ur=e=>({cache:Gr(e.cacheSize),parseClassName:Wr(e),...zr(e)}),Vr=/\s+/,Hr=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(Vr);let a="";for(let l=i.length-1;l>=0;l-=1){const h=i[l],{modifiers:f,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:g}=n(h);let v=!!g,m=r(v?p.substring(0,g):p);if(!m){if(!v){a=h+(a.length>0?" "+a:a);continue}if(m=r(p),!m){a=h+(a.length>0?" "+a:a);continue}v=!1}const b=_r(f).join(":"),w=d?b+Mn:b,S=w+m;if(s.includes(S))continue;s.push(S);const N=o(m,v);for(let k=0;k<N.length;++k){const R=N[k];s.push(w+R)}a=h+(a.length>0?" "+a:a)}return a};function qr(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=An(t))&&(r&&(r+=" "),r+=n);return r}const An=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=An(e[r]))&&(n&&(n+=" "),n+=t);return n};function Kr(e,...t){let n,r,o,s=i;function i(l){const h=t.reduce((f,d)=>d(f),e());return n=Ur(h),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const h=r(l);if(h)return h;const f=Hr(l,n);return o(l,f),f}return function(){return s(qr.apply(null,arguments))}}const T=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},In=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xr=/^\d+\/\d+$/,Yr=new Set(["px","full","screen"]),Jr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,eo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,to=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,de=e=>Te(e)||Yr.has(e)||Xr.test(e),Ce=e=>Le(e,"length",co),Te=e=>!!e&&!Number.isNaN(Number(e)),Nt=e=>Le(e,"number",Te),Ve=e=>!!e&&Number.isInteger(Number(e)),no=e=>e.endsWith("%")&&Te(e.slice(0,-1)),j=e=>In.test(e),Se=e=>Jr.test(e),ro=new Set(["length","size","percentage"]),oo=e=>Le(e,ro,Tn),so=e=>Le(e,"position",Tn),ao=new Set(["image","url"]),io=e=>Le(e,ao,fo),lo=e=>Le(e,"",uo),He=()=>!0,Le=(e,t,n)=>{const r=In.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},co=e=>Zr.test(e)&&!Qr.test(e),Tn=()=>!1,uo=e=>eo.test(e),fo=e=>to.test(e),ho=()=>{const e=T("colors"),t=T("spacing"),n=T("blur"),r=T("brightness"),o=T("borderColor"),s=T("borderRadius"),i=T("borderSpacing"),a=T("borderWidth"),l=T("contrast"),h=T("grayscale"),f=T("hueRotate"),d=T("invert"),p=T("gap"),g=T("gradientColorStops"),v=T("gradientColorStopPositions"),m=T("inset"),b=T("margin"),w=T("opacity"),S=T("padding"),N=T("saturate"),k=T("scale"),R=T("sepia"),C=T("skew"),x=T("space"),y=T("translate"),M=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",j,t],D=()=>[j,t],U=()=>["",de,Ce],G=()=>["auto",Te,j],fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",j],pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[Te,j];return{cacheSize:500,separator:":",theme:{colors:[He],spacing:[de,Ce],blur:["none","",Se,j],brightness:V(),borderColor:[e],borderRadius:["none","","full",Se,j],borderSpacing:D(),borderWidth:U(),contrast:V(),grayscale:W(),hueRotate:V(),invert:W(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[no,Ce],inset:A(),margin:A(),opacity:V(),padding:D(),saturate:V(),scale:V(),sepia:W(),skew:V(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",j]}],container:["container"],columns:[{columns:[Se]}],"break-after":[{"break-after":pe()}],"break-before":[{"break-before":pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...fe(),j]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ve,j]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",j]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Ve,j]}],"grid-cols":[{"grid-cols":[He]}],"col-start-end":[{col:["auto",{span:["full",Ve,j]},j]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[He]}],"row-start-end":[{row:["auto",{span:[Ve,j]},j]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",j]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",j]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...he()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...he(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...he(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",j,t]}],"min-w":[{"min-w":[j,t,"min","max","fit"]}],"max-w":[{"max-w":[j,t,"none","full","min","max","fit","prose",{screen:[Se]},Se]}],h:[{h:[j,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[j,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[j,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[j,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Se,Ce]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nt]}],"font-family":[{font:[He]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",j]}],"line-clamp":[{"line-clamp":["none",Te,Nt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",de,j]}],"list-image":[{"list-image":["none",j]}],"list-style-type":[{list:["none","disc","decimal",j]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",de,Ce]}],"underline-offset":[{"underline-offset":["auto",de,j]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",j]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",j]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...fe(),so]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oo]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},io]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:se()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[de,j]}],"outline-w":[{outline:[de,Ce]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[de,Ce]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Se,lo]}],"shadow-color":[{shadow:[He]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Se,j]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[N]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",j]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",j]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",j]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Ve,j]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",j]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",j]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",j]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[de,Ce,Nt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},po=Kr(ho);function ue(...e){return po(hr(e))}function go({onFilesAdded:e,className:t}){const[n,r]=u.useState(!1),o=u.useCallback(async l=>{const h=[];for(const f of l)if(f.type==="application/pdf"||f.name.endsWith(".pdf"))try{const{getPdfInfo:d}=await Nn(async()=>{const{getPdfInfo:v}=await Promise.resolve().then(()=>Sa);return{getPdfInfo:v}},void 0),p=await d(f),g={id:crypto.randomUUID(),file:f,name:f.name,size:f.size,pageCount:p.pageCount,order:h.length};h.push(g)}catch(d){console.error(`读取PDF文件失败: ${f.name}`,d)}h.length>0&&e(h)},[e]),{getRootProps:s,getInputProps:i,isDragReject:a}=pr({onDragEnter:()=>r(!0),onDragLeave:()=>r(!1),onDrop:l=>{r(!1),o(l)},accept:{"application/pdf":[".pdf"]},multiple:!0,noClick:!1});return c.jsxs("div",{className:ue("border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200",n&&"border-blue-500 bg-blue-50",!n&&"border-gray-300 hover:border-gray-400",a&&"border-red-500 bg-red-50",t),...s(),children:[c.jsx("input",{...i()}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("div",{className:ue("p-4 rounded-full transition-colors",n?"bg-blue-100":"bg-gray-100"),children:n?c.jsx(Ar,{className:"w-8 h-8 text-blue-600"}):c.jsx(Lr,{className:"w-8 h-8 text-gray-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-lg font-medium text-gray-700",children:n?"释放文件到此处":"拖拽PDF文件到此处"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"支持批量上传PDF文件"})]}),c.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Pt,{className:"w-4 h-4"}),"PDF 格式"]})})]})]})}function mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const bt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ze(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Bt(e){return"nodeType"in e}function q(e){var t,n;return e?ze(e)?e:Bt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Gt(e){const{Document:t}=q(e);return e instanceof t}function et(e){return ze(e)?!1:e instanceof q(e).HTMLElement}function On(e){return e instanceof q(e).SVGElement}function Fe(e){return e?ze(e)?e.document:Bt(e)?Gt(e)?e:et(e)||On(e)?e.ownerDocument:document:document:document}const oe=bt?u.useLayoutEffect:u.useEffect;function Wt(e){const t=u.useRef(e);return oe(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function bo(){const e=u.useRef(null),t=u.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ye(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return oe(()=>{n.current!==e&&(n.current=e)},t),n}function tt(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ft(e){const t=Wt(e),n=u.useRef(null),r=u.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function Tt(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let kt={};function nt(e,t){return u.useMemo(()=>{if(t)return t;const n=kt[e]==null?0:kt[e]+1;return kt[e]=n,e+"-"+n},[e,t])}function Ln(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,h]of a){const f=s[l];f!=null&&(s[l]=f+e*h)}return s},{...t})}}const Oe=Ln(1),Je=Ln(-1);function xo(e){return"clientX"in e&&"clientY"in e}function _t(e){if(!e)return!1;const{KeyboardEvent:t}=q(e.target);return t&&e instanceof t}function vo(e){if(!e)return!1;const{TouchEvent:t}=q(e.target);return t&&e instanceof t}function Ot(e){if(vo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return xo(e)?{x:e.clientX,y:e.clientY}:null}const Ze=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ze.Translate.toString(e),Ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),dn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yo(e){return e.matches(dn)?e:e.querySelector(dn)}const wo={display:"none"};function Co(e){let{id:t,value:n}=e;return _.createElement("div",{id:t,style:wo},n)}function So(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function No(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const zn=u.createContext(null);function ko(e){const t=u.useContext(zn);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ro(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const jo={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Do={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Eo(e){let{announcements:t=Do,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=jo}=e;const{announce:s,announcement:i}=No(),a=nt("DndLiveRegion"),[l,h]=u.useState(!1);if(u.useEffect(()=>{h(!0)},[]),ko(u.useMemo(()=>({onDragStart(d){let{active:p}=d;s(t.onDragStart({active:p}))},onDragMove(d){let{active:p,over:g}=d;t.onDragMove&&s(t.onDragMove({active:p,over:g}))},onDragOver(d){let{active:p,over:g}=d;s(t.onDragOver({active:p,over:g}))},onDragEnd(d){let{active:p,over:g}=d;s(t.onDragEnd({active:p,over:g}))},onDragCancel(d){let{active:p,over:g}=d;s(t.onDragCancel({active:p,over:g}))}}),[s,t])),!l)return null;const f=_.createElement(_.Fragment,null,_.createElement(Co,{id:r,value:o.draggable}),_.createElement(So,{id:a,announcement:i}));return n?Ie.createPortal(f,n):f}var z;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(z||(z={}));function ht(){}function un(e,t){return u.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ee=Object.freeze({x:0,y:0});function Fn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Ao(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function fn(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function $n(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function hn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Io=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=hn(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const h=Fn(hn(l),o);s.push({id:a,data:{droppableContainer:i,value:h}})}}return s.sort(Pn)},To=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=fn(t),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const h=fn(l),f=o.reduce((p,g,v)=>p+Fn(h[v],g),0),d=Number((f/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:d}})}}return s.sort(Pn)};function Oo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const l=t.width*t.height,h=e.width*e.height,f=i*a,d=f/(l+h-f);return Number(d.toFixed(4))}return 0}const Lo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=Oo(a,t);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(Ao)};function zo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Bn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ee}function Fo(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const Po=Fo(1);function $o(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Bo(e,t,n){const r=$o(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=e.left-i-(1-o)*parseFloat(n),h=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,d=s?e.height/s:e.height;return{width:f,height:d,top:h,right:l+f,bottom:h+d,left:l}}const Go={ignoreTransform:!1};function Pe(e,t){t===void 0&&(t=Go);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:f}=q(e).getComputedStyle(e);h&&(n=Bo(n,h,f))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function pn(e){return Pe(e,{ignoreTransform:!0})}function Wo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function _o(e,t){return t===void 0&&(t=q(e).getComputedStyle(e)),t.position==="fixed"}function Uo(e,t){t===void 0&&(t=q(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function xt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Gt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!et(o)||On(o)||n.includes(o))return n;const s=q(e).getComputedStyle(o);return o!==e&&Uo(o,s)&&n.push(o),_o(o,s)?n:r(o.parentNode)}return e?r(e):n}function Gn(e){const[t]=xt(e,1);return t??null}function Rt(e){return!bt||!e?null:ze(e)?e:Bt(e)?Gt(e)||e===Fe(e).scrollingElement?window:et(e)?e:null:null}function Wn(e){return ze(e)?e.scrollX:e.scrollLeft}function _n(e){return ze(e)?e.scrollY:e.scrollTop}function Lt(e){return{x:Wn(e),y:_n(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function Un(e){return!bt||!e?!1:e===document.scrollingElement}function Vn(e){const t={x:0,y:0},n=Un(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const Vo={x:.2,y:.2};function Ho(e,t,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=Vo);const{isTop:h,isBottom:f,isLeft:d,isRight:p}=Vn(e),g={x:0,y:0},v={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!h&&s<=t.top+m.height?(g.y=F.Backward,v.y=r*Math.abs((t.top+m.height-s)/m.height)):!f&&l>=t.bottom-m.height&&(g.y=F.Forward,v.y=r*Math.abs((t.bottom-m.height-l)/m.height)),!p&&a>=t.right-m.width?(g.x=F.Forward,v.x=r*Math.abs((t.right-m.width-a)/m.width)):!d&&i<=t.left+m.width&&(g.x=F.Backward,v.x=r*Math.abs((t.left+m.width-i)/m.width)),{direction:g,speed:v}}function qo(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Hn(e){return e.reduce((t,n)=>Oe(t,Lt(n)),ee)}function Ko(e){return e.reduce((t,n)=>t+Wn(n),0)}function Xo(e){return e.reduce((t,n)=>t+_n(n),0)}function Yo(e,t){if(t===void 0&&(t=Pe),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);Gn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Jo=[["x",["left","right"],Ko],["y",["top","bottom"],Xo]];class Ut{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=xt(n),o=Hn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of Jo)for(const l of i)Object.defineProperty(this,l,{get:()=>{const h=a(r),f=o[s]-h;return this.rect[l]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Zo(e){const{EventTarget:t}=q(e);return e instanceof t?e:Fe(e)}function jt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Q;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Q||(Q={}));function gn(e){e.preventDefault()}function Qo(e){e.stopPropagation()}var E;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(E||(E={}));const qn={start:[E.Space,E.Enter],cancel:[E.Esc],end:[E.Space,E.Enter,E.Tab]},es=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case E.Right:return{...n,x:n.x+25};case E.Left:return{...n,x:n.x-25};case E.Down:return{...n,y:n.y+25};case E.Up:return{...n,y:n.y-25}}};class Vt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new qe(Fe(n)),this.windowListeners=new qe(q(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Q.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Yo(r),n(ee)}handleKeyDown(t){if(_t(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=qn,coordinateGetter:i=es,scrollBehavior:a="smooth"}=o,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=f);const d=i(t,{active:n,context:r.current,currentCoordinates:f});if(d){const p=Je(d,f),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const m of v){const b=t.code,{isTop:w,isRight:S,isLeft:N,isBottom:k,maxScroll:R,minScroll:C}=Vn(m),x=qo(m),y={x:Math.min(b===E.Right?x.right-x.width/2:x.right,Math.max(b===E.Right?x.left:x.left+x.width/2,d.x)),y:Math.min(b===E.Down?x.bottom-x.height/2:x.bottom,Math.max(b===E.Down?x.top:x.top+x.height/2,d.y))},M=b===E.Right&&!S||b===E.Left&&!N,O=b===E.Down&&!k||b===E.Up&&!w;if(M&&y.x!==d.x){const A=m.scrollLeft+p.x,D=b===E.Right&&A<=R.x||b===E.Left&&A>=C.x;if(D&&!p.y){m.scrollTo({left:A,behavior:a});return}D?g.x=m.scrollLeft-A:g.x=b===E.Right?m.scrollLeft-R.x:m.scrollLeft-C.x,g.x&&m.scrollBy({left:-g.x,behavior:a});break}else if(O&&y.y!==d.y){const A=m.scrollTop+p.y,D=b===E.Down&&A<=R.y||b===E.Up&&A>=C.y;if(D&&!p.x){m.scrollTo({top:A,behavior:a});return}D?g.y=m.scrollTop-A:g.y=b===E.Down?m.scrollTop-R.y:m.scrollTop-C.y,g.y&&m.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,Oe(Je(d,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Vt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=qn,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function mn(e){return!!(e&&"distance"in e)}function bn(e){return!!(e&&"delay"in e)}class Ht{constructor(t,n,r){var o;r===void 0&&(r=Zo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Fe(i),this.documentListeners=new qe(this.document),this.listeners=new qe(r),this.windowListeners=new qe(q(i)),this.initialCoordinates=(o=Ot(s))!=null?o:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.DragStart,gn),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),this.windowListeners.add(Q.ContextMenu,gn),this.documentListeners.add(Q.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(bn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(mn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Q.Click,Qo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Q.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=Ot(t))!=null?n:ee,h=Je(o,l);if(!r&&a){if(mn(a)){if(a.tolerance!=null&&jt(h,a.tolerance))return this.handleCancel();if(jt(h,a.distance))return this.handleStart()}if(bn(a)&&jt(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===E.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ts={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qt extends Ht{constructor(t){const{event:n}=t,r=Fe(n.target);super(t,ts,r)}}qt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const ns={move:{name:"mousemove"},end:{name:"mouseup"}};var zt;(function(e){e[e.RightClick=2]="RightClick"})(zt||(zt={}));class rs extends Ht{constructor(t){super(t,ns,Fe(t.event.target))}}rs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Dt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class os extends Ht{constructor(t){super(t,Dt)}static setup(){return window.addEventListener(Dt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dt.move.name,t)};function t(){}}}os.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Ke;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ke||(Ke={}));var pt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pt||(pt={}));function ss(e){let{acceleration:t,activator:n=Ke.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=pt.TreeOrder,pointerCoordinates:l,scrollableAncestors:h,scrollableAncestorRects:f,delta:d,threshold:p}=e;const g=is({delta:d,disabled:!s}),[v,m]=bo(),b=u.useRef({x:0,y:0}),w=u.useRef({x:0,y:0}),S=u.useMemo(()=>{switch(n){case Ke.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Ke.DraggableRect:return o}},[n,o,l]),N=u.useRef(null),k=u.useCallback(()=>{const C=N.current;if(!C)return;const x=b.current.x*w.current.x,y=b.current.y*w.current.y;C.scrollBy(x,y)},[]),R=u.useMemo(()=>a===pt.TreeOrder?[...h].reverse():h,[a,h]);u.useEffect(()=>{if(!s||!h.length||!S){m();return}for(const C of R){if((r==null?void 0:r(C))===!1)continue;const x=h.indexOf(C),y=f[x];if(!y)continue;const{direction:M,speed:O}=Ho(C,y,S,t,p);for(const A of["x","y"])g[A][M[A]]||(O[A]=0,M[A]=0);if(O.x>0||O.y>0){m(),N.current=C,v(k,i),b.current=O,w.current=M;return}}b.current={x:0,y:0},w.current={x:0,y:0},m()},[t,k,r,m,s,i,JSON.stringify(S),JSON.stringify(g),v,h,R,f,JSON.stringify(p)])}const as={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function is(e){let{delta:t,disabled:n}=e;const r=Tt(t);return tt(o=>{if(n||!r||!o)return as;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:o.x[F.Backward]||s.x===-1,[F.Forward]:o.x[F.Forward]||s.x===1},y:{[F.Backward]:o.y[F.Backward]||s.y===-1,[F.Forward]:o.y[F.Forward]||s.y===1}}},[n,t,r])}function ls(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return tt(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function cs(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var Qe;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Qe||(Qe={}));var Ft;(function(e){e.Optimized="optimized"})(Ft||(Ft={}));const xn=new Map;function ds(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=u.useState(null),{frequency:a,measure:l,strategy:h}=o,f=u.useRef(e),d=b(),p=Ye(d),g=u.useCallback(function(w){w===void 0&&(w=[]),!p.current&&i(S=>S===null?w:S.concat(w.filter(N=>!S.includes(N))))},[p]),v=u.useRef(null),m=tt(w=>{if(d&&!n)return xn;if(!w||w===xn||f.current!==e||s!=null){const S=new Map;for(let N of e){if(!N)continue;if(s&&s.length>0&&!s.includes(N.id)&&N.rect.current){S.set(N.id,N.rect.current);continue}const k=N.node.current,R=k?new Ut(l(k),k):null;N.rect.current=R,R&&S.set(N.id,R)}return S}return w},[e,s,n,d,l]);return u.useEffect(()=>{f.current=e},[e]),u.useEffect(()=>{d||g()},[n,d]),u.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),u.useEffect(()=>{d||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,d,g,...r]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:s!=null};function b(){switch(h){case Qe.Always:return!1;case Qe.BeforeDragging:return n;default:return!n}}}function Kn(e,t){return tt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function us(e,t){return Kn(e,t)}function fs(e){let{callback:t,disabled:n}=e;const r=Wt(t),o=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return u.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function vt(e){let{callback:t,disabled:n}=e;const r=Wt(t),o=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return u.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function hs(e){return new Ut(Pe(e),e)}function vn(e,t,n){t===void 0&&(t=hs);const[r,o]=u.useState(null);function s(){o(l=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=l??n)!=null?h:null}const f=t(e);return JSON.stringify(l)===JSON.stringify(f)?l:f})}const i=fs({callback(l){if(e)for(const h of l){const{type:f,target:d}=h;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),a=vt({callback:s});return oe(()=>{s(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function ps(e){const t=Kn(e);return Bn(e,t)}const yn=[];function gs(e){const t=u.useRef(e),n=tt(r=>e?r&&r!==yn&&e&&t.current&&e.parentNode===t.current.parentNode?r:xt(e):yn,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function ms(e){const[t,n]=u.useState(null),r=u.useRef(e),o=u.useCallback(s=>{const i=Rt(s.target);i&&n(a=>a?(a.set(i,Lt(i)),new Map(a)):null)},[]);return u.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(l=>{const h=Rt(l);return h?(h.addEventListener("scroll",o,{passive:!0}),[h,Lt(h)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(l=>{const h=Rt(l);h==null||h.removeEventListener("scroll",o)})}},[o,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>Oe(s,i),ee):Hn(e):ee,[e,t])}function wn(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==ee;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Je(e,n.current):ee}function bs(e){u.useEffect(()=>{if(!bt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function xs(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function Xn(e){return u.useMemo(()=>e?Wo(e):null,[e])}const Cn=[];function vs(e,t){t===void 0&&(t=Pe);const[n]=e,r=Xn(n?q(n):null),[o,s]=u.useState(Cn);function i(){s(()=>e.length?e.map(l=>Un(l)?r:new Ut(t(l),l)):Cn)}const a=vt({callback:i});return oe(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),o}function ys(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return et(t)?t:e}function ws(e){let{measure:t}=e;const[n,r]=u.useState(null),o=u.useCallback(h=>{for(const{target:f}of h)if(et(f)){r(d=>{const p=t(f);return d?{...d,width:p.width,height:p.height}:p});break}},[t]),s=vt({callback:o}),i=u.useCallback(h=>{const f=ys(h);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?t(f):null)},[t,s]),[a,l]=ft(i);return u.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Cs=[{sensor:qt,options:{}},{sensor:Vt,options:{}}],Ss={current:{}},dt={draggable:{measure:pn},droppable:{measure:pn,strategy:Qe.WhileDragging,frequency:Ft.Optimized},dragOverlay:{measure:Pe}};class Xe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ns={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ht},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dt,measureDroppableContainers:ht,windowRect:null,measuringScheduled:!1},ks={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ht,draggableNodes:new Map,over:null,measureDroppableContainers:ht},yt=u.createContext(ks),Yn=u.createContext(Ns);function Rs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xe}}}function js(e,t){switch(t.type){case z.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case z.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case z.DragEnd:case z.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case z.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Xe(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case z.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Xe(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case z.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Xe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ds(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=u.useContext(yt),s=Tt(r),i=Tt(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!_t(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:h}=a;if(!l.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[l.current,h.current]){if(!f)continue;const d=yo(f);if(d){d.focus();break}}})}},[r,t,o,i,s]),null}function Es(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Ms(e){return u.useMemo(()=>({draggable:{...dt.draggable,...e==null?void 0:e.draggable},droppable:{...dt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...dt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function As(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=u.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;oe(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const f=n(h),d=Bn(f,r);if(i||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=Gn(h);p&&p.scrollBy({top:d.y,left:d.x})}},[t,i,a,r,n])}const Jn=u.createContext({...ee,scaleX:1,scaleY:1});var Ne;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ne||(Ne={}));const Is=u.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:h,sensors:f=Cs,collisionDetection:d=Lo,measuring:p,modifiers:g,...v}=t;const m=u.useReducer(js,void 0,Rs),[b,w]=m,[S,N]=Ro(),[k,R]=u.useState(Ne.Uninitialized),C=k===Ne.Initialized,{draggable:{active:x,nodes:y,translate:M},droppable:{containers:O}}=b,A=x!=null?y.get(x):null,D=u.useRef({initial:null,translated:null}),U=u.useMemo(()=>{var B;return x!=null?{id:x,data:(B=A==null?void 0:A.data)!=null?B:Ss,rect:D}:null},[x,A]),G=u.useRef(null),[fe,se]=u.useState(null),[$,he]=u.useState(null),W=Ye(v,Object.values(v)),pe=nt("DndDescribedBy",i),V=u.useMemo(()=>O.getEnabled(),[O]),H=Ms(p),{droppableRects:ae,measureDroppableContainers:ke,measuringScheduled:$e}=ds(V,{dragging:C,dependencies:[M.x,M.y],config:H.droppable}),J=ls(y,x),rt=u.useMemo(()=>$?Ot($):null,[$]),ge=fr(),ie=us(J,H.draggable.measure);As({activeNode:x!=null?y.get(x):null,config:ge.layoutShiftCompensation,initialRect:ie,measure:H.draggable.measure});const I=vn(J,H.draggable.measure,ie),Be=vn(J?J.parentElement:null),te=u.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=O.getNodeFor((n=te.current.over)==null?void 0:n.id),le=ws({measure:H.dragOverlay.measure}),je=(r=le.nodeRef.current)!=null?r:J,De=C?(o=le.rect)!=null?o:I:null,Yt=!!(le.nodeRef.current&&le.rect),Jt=ps(Yt?null:I),wt=Xn(je?q(je):null),me=gs(C?Re??J:null),ot=vs(me),st=Es(g,{transform:{x:M.x-Jt.x,y:M.y-Jt.y,scaleX:1,scaleY:1},activatorEvent:$,active:U,activeNodeRect:I,containerNodeRect:Be,draggingNodeRect:De,over:te.current.over,overlayNodeRect:le.rect,scrollableAncestors:me,scrollableAncestorRects:ot,windowRect:wt}),Zt=rt?Oe(rt,M):null,Qt=ms(me),sr=wn(Qt),ar=wn(Qt,[I]),Ee=Oe(st,sr),Me=De?Po(De,st):null,Ge=U&&Me?d({active:U,collisionRect:Me,droppableRects:ae,droppableContainers:V,pointerCoordinates:Zt}):null,en=$n(Ge,"id"),[be,tn]=u.useState(null),ir=Yt?st:Oe(st,ar),lr=zo(ir,(s=be==null?void 0:be.rect)!=null?s:null,I),Ct=u.useRef(null),nn=u.useCallback((B,K)=>{let{sensor:X,options:xe}=K;if(G.current==null)return;const Z=y.get(G.current);if(!Z)return;const Y=B.nativeEvent,ne=new X({active:G.current,activeNode:Z,event:Y,options:xe,context:te,onAbort(P){if(!y.get(P))return;const{onDragAbort:re}=W.current,ce={id:P};re==null||re(ce),S({type:"onDragAbort",event:ce})},onPending(P,ve,re,ce){if(!y.get(P))return;const{onDragPending:_e}=W.current,ye={id:P,constraint:ve,initialCoordinates:re,offset:ce};_e==null||_e(ye),S({type:"onDragPending",event:ye})},onStart(P){const ve=G.current;if(ve==null)return;const re=y.get(ve);if(!re)return;const{onDragStart:ce}=W.current,We={activatorEvent:Y,active:{id:ve,data:re.data,rect:D}};Ie.unstable_batchedUpdates(()=>{ce==null||ce(We),R(Ne.Initializing),w({type:z.DragStart,initialCoordinates:P,active:ve}),S({type:"onDragStart",event:We}),se(Ct.current),he(Y)})},onMove(P){w({type:z.DragMove,coordinates:P})},onEnd:Ae(z.DragEnd),onCancel:Ae(z.DragCancel)});Ct.current=ne;function Ae(P){return async function(){const{active:re,collisions:ce,over:We,scrollAdjustedTranslate:_e}=te.current;let ye=null;if(re&&_e){const{cancelDrop:Ue}=W.current;ye={activatorEvent:Y,active:re,collisions:ce,delta:_e,over:We},P===z.DragEnd&&typeof Ue=="function"&&await Promise.resolve(Ue(ye))&&(P=z.DragCancel)}G.current=null,Ie.unstable_batchedUpdates(()=>{w({type:P}),R(Ne.Uninitialized),tn(null),se(null),he(null),Ct.current=null;const Ue=P===z.DragEnd?"onDragEnd":"onDragCancel";if(ye){const St=W.current[Ue];St==null||St(ye),S({type:Ue,event:ye})}})}}},[y]),cr=u.useCallback((B,K)=>(X,xe)=>{const Z=X.nativeEvent,Y=y.get(xe);if(G.current!==null||!Y||Z.dndKit||Z.defaultPrevented)return;const ne={active:Y};B(X,K.options,ne)===!0&&(Z.dndKit={capturedBy:K.sensor},G.current=xe,nn(X,K))},[y,nn]),rn=cs(f,cr);bs(f),oe(()=>{I&&k===Ne.Initializing&&R(Ne.Initialized)},[I,k]),u.useEffect(()=>{const{onDragMove:B}=W.current,{active:K,activatorEvent:X,collisions:xe,over:Z}=te.current;if(!K||!X)return;const Y={active:K,activatorEvent:X,collisions:xe,delta:{x:Ee.x,y:Ee.y},over:Z};Ie.unstable_batchedUpdates(()=>{B==null||B(Y),S({type:"onDragMove",event:Y})})},[Ee.x,Ee.y]),u.useEffect(()=>{const{active:B,activatorEvent:K,collisions:X,droppableContainers:xe,scrollAdjustedTranslate:Z}=te.current;if(!B||G.current==null||!K||!Z)return;const{onDragOver:Y}=W.current,ne=xe.get(en),Ae=ne&&ne.rect.current?{id:ne.id,rect:ne.rect.current,data:ne.data,disabled:ne.disabled}:null,P={active:B,activatorEvent:K,collisions:X,delta:{x:Z.x,y:Z.y},over:Ae};Ie.unstable_batchedUpdates(()=>{tn(Ae),Y==null||Y(P),S({type:"onDragOver",event:P})})},[en]),oe(()=>{te.current={activatorEvent:$,active:U,activeNode:J,collisionRect:Me,collisions:Ge,droppableRects:ae,draggableNodes:y,draggingNode:je,draggingNodeRect:De,droppableContainers:O,over:be,scrollableAncestors:me,scrollAdjustedTranslate:Ee},D.current={initial:De,translated:Me}},[U,J,Ge,Me,y,je,De,ae,O,be,me,Ee]),ss({...ge,delta:M,draggingRect:Me,pointerCoordinates:Zt,scrollableAncestors:me,scrollableAncestorRects:ot});const dr=u.useMemo(()=>({active:U,activeNode:J,activeNodeRect:I,activatorEvent:$,collisions:Ge,containerNodeRect:Be,dragOverlay:le,draggableNodes:y,droppableContainers:O,droppableRects:ae,over:be,measureDroppableContainers:ke,scrollableAncestors:me,scrollableAncestorRects:ot,measuringConfiguration:H,measuringScheduled:$e,windowRect:wt}),[U,J,I,$,Ge,Be,le,y,O,ae,be,ke,me,ot,H,$e,wt]),ur=u.useMemo(()=>({activatorEvent:$,activators:rn,active:U,activeNodeRect:I,ariaDescribedById:{draggable:pe},dispatch:w,draggableNodes:y,over:be,measureDroppableContainers:ke}),[$,rn,U,I,w,pe,y,be,ke]);return _.createElement(zn.Provider,{value:N},_.createElement(yt.Provider,{value:ur},_.createElement(Yn.Provider,{value:dr},_.createElement(Jn.Provider,{value:lr},h)),_.createElement(Ds,{disabled:(a==null?void 0:a.restoreFocus)===!1})),_.createElement(Eo,{...a,hiddenTextDescribedById:pe}));function fr(){const B=(fe==null?void 0:fe.autoScrollEnabled)===!1,K=typeof l=="object"?l.enabled===!1:l===!1,X=C&&!B&&!K;return typeof l=="object"?{...l,enabled:X}:{enabled:X}}}),Ts=u.createContext(null),Sn="button",Os="Draggable";function Ls(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=nt(Os),{activators:i,activatorEvent:a,active:l,activeNodeRect:h,ariaDescribedById:f,draggableNodes:d,over:p}=u.useContext(yt),{role:g=Sn,roleDescription:v="draggable",tabIndex:m=0}=o??{},b=(l==null?void 0:l.id)===t,w=u.useContext(b?Jn:Ts),[S,N]=ft(),[k,R]=ft(),C=xs(i,t),x=Ye(n);oe(()=>(d.set(t,{id:t,key:s,node:S,activatorNode:k,data:x}),()=>{const M=d.get(t);M&&M.key===s&&d.delete(t)}),[d,t]);const y=u.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":r,"aria-pressed":b&&g===Sn?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,g,m,b,v,f.draggable]);return{active:l,activatorEvent:a,activeNodeRect:h,attributes:y,isDragging:b,listeners:r?void 0:C,node:S,over:p,setNodeRef:N,setActivatorNodeRef:R,transform:w}}function zs(){return u.useContext(Yn)}const Fs="Droppable",Ps={timeout:25};function $s(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=nt(Fs),{active:i,dispatch:a,over:l,measureDroppableContainers:h}=u.useContext(yt),f=u.useRef({disabled:n}),d=u.useRef(!1),p=u.useRef(null),g=u.useRef(null),{disabled:v,updateMeasurementsFor:m,timeout:b}={...Ps,...o},w=Ye(m??r),S=u.useCallback(()=>{if(!d.current){d.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{h(Array.isArray(w.current)?w.current:[w.current]),g.current=null},b)},[b]),N=vt({callback:S,disabled:v||!i}),k=u.useCallback((y,M)=>{N&&(M&&(N.unobserve(M),d.current=!1),y&&N.observe(y))},[N]),[R,C]=ft(k),x=Ye(t);return u.useEffect(()=>{!N||!R.current||(N.disconnect(),d.current=!1,N.observe(R.current))},[R,N]),u.useEffect(()=>(a({type:z.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:p,data:x}}),()=>a({type:z.UnregisterDroppable,key:s,id:r})),[r]),u.useEffect(()=>{n!==f.current.disabled&&(a({type:z.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,a]),{active:i,rect:p,isOver:(l==null?void 0:l.id)===r,node:R,over:l,setNodeRef:C}}function Kt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Bs(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function at(e){return e!==null&&e>=0}function Gs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ws(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Xt=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Kt(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Zn="Sortable",Qn=_.createContext({activeIndex:-1,containerId:Zn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Xt,disabled:{draggable:!1,droppable:!1}});function _s(e){let{children:t,id:n,items:r,strategy:o=Xt,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:h,measureDroppableContainers:f}=zs(),d=nt(Zn,n),p=a.rect!==null,g=u.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),v=i!=null,m=i?g.indexOf(i.id):-1,b=h?g.indexOf(h.id):-1,w=u.useRef(g),S=!Gs(g,w.current),N=b!==-1&&m===-1||S,k=Ws(s);oe(()=>{S&&v&&f(g)},[S,g,v,f]),u.useEffect(()=>{w.current=g},[g]);const R=u.useMemo(()=>({activeIndex:m,containerId:d,disabled:k,disableTransforms:N,items:g,overIndex:b,useDragOverlay:p,sortedRects:Bs(g,l),strategy:o}),[m,d,k.draggable,k.droppable,N,g,b,l,p,o]);return _.createElement(Qn.Provider,{value:R},t)}const Us=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Kt(n,r,o).indexOf(t)},Vs=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:h}=e;return!h||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===l},Hs={duration:200,easing:"ease"},er="transform",qs=Ze.Transition.toString({property:er,duration:0,easing:"linear"}),Ks={roleDescription:"sortable"};function Xs(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=u.useState(null),a=u.useRef(n);return oe(()=>{if(!t&&n!==a.current&&r.current){const l=o.current;if(l){const h=Pe(r.current,{ignoreTransform:!0}),f={x:l.left-h.left,y:l.top-h.top,scaleX:l.width/h.width,scaleY:l.height/h.height};(f.x||f.y)&&i(f)}}n!==a.current&&(a.current=n)},[t,n,r,o]),u.useEffect(()=>{s&&i(null)},[s]),s}function Ys(e){let{animateLayoutChanges:t=Vs,attributes:n,disabled:r,data:o,getNewIndex:s=Us,id:i,strategy:a,resizeObserverConfig:l,transition:h=Hs}=e;const{items:f,containerId:d,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:m,overIndex:b,useDragOverlay:w,strategy:S}=u.useContext(Qn),N=Js(r,g),k=f.indexOf(i),R=u.useMemo(()=>({sortable:{containerId:d,index:k,items:f},...o}),[d,o,k,f]),C=u.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:x,node:y,isOver:M,setNodeRef:O}=$s({id:i,data:R,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...l}}),{active:A,activatorEvent:D,activeNodeRect:U,attributes:G,setNodeRef:fe,listeners:se,isDragging:$,over:he,setActivatorNodeRef:W,transform:pe}=Ls({id:i,data:R,attributes:{...Ks,...n},disabled:N.draggable}),V=mo(O,fe),H=!!A,ae=H&&!v&&at(p)&&at(b),ke=!w&&$,$e=ke&&ae?pe:null,rt=ae?$e??(a??S)({rects:m,activeNodeRect:U,activeIndex:p,overIndex:b,index:k}):null,ge=at(p)&&at(b)?s({id:i,items:f,activeIndex:p,overIndex:b}):k,ie=A==null?void 0:A.id,I=u.useRef({activeId:ie,items:f,newIndex:ge,containerId:d}),Be=f!==I.current.items,te=t({active:A,containerId:d,isDragging:$,isSorting:H,id:i,index:k,items:f,newIndex:I.current.newIndex,previousItems:I.current.items,previousContainerId:I.current.containerId,transition:h,wasDragging:I.current.activeId!=null}),Re=Xs({disabled:!te,index:k,node:y,rect:x});return u.useEffect(()=>{H&&I.current.newIndex!==ge&&(I.current.newIndex=ge),d!==I.current.containerId&&(I.current.containerId=d),f!==I.current.items&&(I.current.items=f)},[H,ge,d,f]),u.useEffect(()=>{if(ie===I.current.activeId)return;if(ie&&!I.current.activeId){I.current.activeId=ie;return}const je=setTimeout(()=>{I.current.activeId=ie},50);return()=>clearTimeout(je)},[ie]),{active:A,activeIndex:p,attributes:G,data:R,rect:x,index:k,newIndex:ge,items:f,isOver:M,isSorting:H,isDragging:$,listeners:se,node:y,overIndex:b,over:he,setNodeRef:V,setActivatorNodeRef:W,setDroppableNodeRef:O,setDraggableNodeRef:fe,transform:Re??rt,transition:le()};function le(){if(Re||Be&&I.current.newIndex===k)return qs;if(!(ke&&!_t(D)||!h)&&(H||te))return Ze.Transition.toString({...h,property:er})}}function Js(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function gt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Zs=[E.Down,E.Right,E.Up,E.Left],Qs=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=t;if(Zs.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const p=o.get(d.id);if(p)switch(e.code){case E.Down:r.top<p.top&&l.push(d);break;case E.Up:r.top>p.top&&l.push(d);break;case E.Left:r.left>p.left&&l.push(d);break;case E.Right:r.left<p.left&&l.push(d);break}});const h=To({collisionRect:r,droppableRects:o,droppableContainers:l});let f=$n(h,"id");if(f===(i==null?void 0:i.id)&&h.length>1&&(f=h[1].id),f!=null){const d=s.get(n.id),p=s.get(f),g=p?o.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&d&&p){const b=xt(v).some((C,x)=>a[x]!==C),w=tr(d,p),S=ea(d,p),N=b||!w?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},k={x:g.left,y:g.top};return N.x&&N.y?k:Je(k,N)}}}};function tr(e,t){return!gt(e)||!gt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function ea(e,t){return!gt(e)||!gt(t)||!tr(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function ta({file:e,onRemove:t,onSelect:n,isSelected:r}){const{attributes:o,listeners:s,setNodeRef:i,transform:a,transition:l,isDragging:h}=Ys({id:e.id}),f={transform:Ze.Transform.toString(a),transition:l,opacity:h?.5:1},d=p=>p<1024?`${p} B`:p<1024*1024?`${(p/1024).toFixed(1)} KB`:`${(p/(1024*1024)).toFixed(1)} MB`;return c.jsxs("div",{ref:i,style:f,className:ue("flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer",r?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300",h&&"shadow-lg"),onClick:n,children:[c.jsx("div",{...o,...s,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-gray-100 rounded",children:c.jsx(Ir,{className:"w-4 h-4 text-gray-400"})}),c.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:c.jsx(Mr,{className:"w-5 h-5 text-red-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-800 truncate",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[e.pageCount," 页 · ",d(e.size)]})]}),c.jsx("button",{onClick:p=>{p.stopPropagation(),t()},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Dn,{className:"w-4 h-4"})})]})}function na({files:e,onRemove:t,onReorder:n,onSelect:r,selectedId:o}){const s=Mo(un(qt),un(Vt,{coordinateGetter:Qs})),i=a=>{const{active:l,over:h}=a;if(h&&l.id!==h.id){const f=e.findIndex(g=>g.id===l.id),d=e.findIndex(g=>g.id===h.id),p=Kt(e,f,d);p.forEach((g,v)=>{g.order=v}),n(p)}};return e.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Pt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"暂无文件"}),c.jsx("p",{className:"text-sm",children:"请添加要合并的PDF文件"})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx(Is,{sensors:s,collisionDetection:Io,onDragEnd:i,children:c.jsx(_s,{items:e.map(a=>a.id),strategy:Xt,children:e.map(a=>c.jsx(ta,{file:a,onRemove:()=>t(a.id),onSelect:()=>r(a),isSelected:a.id===o},a.id))})}),c.jsx("div",{className:"flex justify-between items-center pt-4 border-t",children:c.jsxs("span",{className:"text-sm text-gray-500",children:["共 ",e.length," 个文件 · ",e.reduce((a,l)=>a+l.pageCount,0)," 页"]})})]})}function ra({files:e,onMerge:t,disabled:n}){const[r,o]=u.useState(!1),[s,i]=u.useState("idle"),[a,l]=u.useState(""),h=async()=>{if(e.length!==0){o(!0),i("idle"),l("");try{const d=await t(),p=URL.createObjectURL(d),g=document.createElement("a");g.href=p,g.download=`merged_${new Date().toISOString().slice(0,10)}.pdf`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p),i("success"),setTimeout(()=>i("idle"),3e3)}catch(d){const p=d instanceof Error?d.message:String(d);console.error("Merge failed:",d),l(p),i("error"),setTimeout(()=>i("idle"),5e3)}finally{o(!1)}}},f=n||e.length===0||r;return c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:h,disabled:f,className:ue("px-6 py-3 rounded-lg font-medium transition-all flex items-center gap-2",s==="success"&&"bg-green-500 text-white",s==="error"&&"bg-red-500 text-white",s==="idle"&&!f&&"bg-blue-600 text-white hover:bg-blue-700",f&&"bg-gray-300 text-gray-500 cursor-not-allowed"),children:r?c.jsxs(c.Fragment,{children:[c.jsx(ct,{className:"w-5 h-5 animate-spin"}),"Merging..."]}):s==="success"?c.jsxs(c.Fragment,{children:[c.jsx(Rn,{className:"w-5 h-5"}),"Download Complete!"]}):s==="error"?c.jsxs(c.Fragment,{children:[c.jsx(jn,{className:"w-5 h-5"}),"Merge Failed"]}):c.jsxs(c.Fragment,{children:[c.jsx(Er,{className:"w-5 h-5"}),"Merge & Download (",e.length," files)"]})}),s==="error"&&a&&c.jsxs("p",{className:"text-red-500 text-sm mt-2",children:["Error: ",a]})]})}function oa({options:e,onChange:t}){return c.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-800",children:"Merge Options"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",id:"autoRotate",checked:e.autoRotate,onChange:n=>t({...e,autoRotate:n.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Auto-rotate pages"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",id:"generateTOC",checked:e.generateTOC,onChange:n=>t({...e,generateTOC:n.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"生成中文目录页"})]})]})]})}typeof window<"u"&&(mr.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${gr}/pdf.worker.min.js`);const sa="https://api.siliconflow.cn/v1/chat/completions",aa="Qwen/Qwen2.5-7B-Instruct",ia="http://localhost:11434/api/generate",la="qwen2.5:7b",ca="siliconflow";let mt=null;function ut(e){mt=e.trim()}function da(){return!!mt&&mt.length>0}function nr(){const e=mt||"";switch(ca){case"siliconflow":return{url:sa,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},model:aa,isOpenAiFormat:!0};case"ollama":return{url:ia,headers:{"Content-Type":"application/json"},model:la,isOpenAiFormat:!1}}}async function ua(e){try{const t=await e.arrayBuffer(),n=await br({data:t}).promise,r=Math.min(n.numPages,5);let o="";for(let s=1;s<=r;s++){const l=(await(await n.getPage(s)).getTextContent()).items.map(h=>h.str).join(" ");o+=l+`
`}return o.length<100?(console.log(`PDF "${e.name}" has little text`),`文档: ${e.name.replace(/\.[^/.]+$/,"")}`):o.slice(0,8e3)}catch(t){return console.error("PDF text extraction failed:",t),`文档: ${e.name.replace(/\.[^/.]+$/,"")}`}}async function fa(e,t,n){var o,s,i;n==null||n("正在生成摘要...");const r=`请为以下文档生成简洁的中文摘要：

文件名: ${t}

文档内容:
${e.slice(0,4e3)}

请用2-3句话总结，并列出3-5个要点。
格式：
摘要: xxx
要点:
- xxx
- xxx
- xxx`;try{const a=nr();let l;if(a.isOpenAiFormat?l=await fetch(a.url,{method:"POST",headers:a.headers,body:JSON.stringify({model:a.model,messages:[{role:"system",content:"你是一个文档摘要助手。请用简洁准确的中文生成摘要。"},{role:"user",content:r}],max_tokens:500,temperature:.5})}):l=await fetch(a.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a.model,prompt:`你是文档摘要助手。请用简洁准确的中文生成摘要。

${r}`,stream:!1})}),!l.ok){const b=await l.text();throw new Error(`API error: ${l.status} ${b}`)}const h=await l.json();let f="";a.isOpenAiFormat?f=((i=(s=(o=h.choices)==null?void 0:o[0])==null?void 0:s.message)==null?void 0:i.content)||"":f=h.response||"";const d=f.match(/(?:摘要)[:：]\s*(.+)/i),p=d?d[1].trim():f.slice(0,200),g=[],v=f.split(`
`);let m=!1;for(const b of v){if(/^(?:要点)[:：]/.test(b)){m=!0;continue}m&&/^[-•*]\s*(.+)/.test(b)&&g.push(b.replace(/^[-•*]\s*/,"").trim())}return n==null||n("摘要生成完成"),{pdfId:"",summary:p,keyPoints:g,fileName:t}}catch(a){return console.error("摘要生成失败:",a),n==null||n("摘要生成失败"),{pdfId:"",summary:"无法生成摘要，请检查网络连接。",keyPoints:[],fileName:t}}}async function ha(e,t){var o,s,i;if(e.length===0)return[];t==null||t("正在生成目录...",50);const r=`以下是要合并的多个PDF文档的信息，请为整个合并文档生成一个中文目录结构。
根据每个文档的名称和摘要，判断其主要内容和主题，为合并后的文档生成合理的章节标题。

${e.map((a,l)=>`文档${l+1}: ${a.name}
摘要: ${a.summary||"无摘要"}
页数: ${a.pageCount}页`).join(`

`)}

请生成目录结构，每个章节对应一个文档。
格式要求：
1. 只输出目录列表，不要其他内容
2. 每行格式: "章节标题 (页码)"
3. 目录应该反映文档的实际内容和阅读顺序
4. 使用简洁明了的中文标题

示例输出：
项目概述 (1)
技术方案详解 (5)
测试结果分析 (12)
总结与展望 (18)

目录:`;try{const a=nr();let l;if(a.isOpenAiFormat?l=await fetch(a.url,{method:"POST",headers:a.headers,body:JSON.stringify({model:a.model,messages:[{role:"system",content:"你是一个文档目录生成助手。请根据文档内容生成简洁准确的中文章节标题。只输出目录列表，每行一个章节。"},{role:"user",content:r}],max_tokens:300,temperature:.3})}):l=await fetch(a.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a.model,prompt:`你是文档目录生成助手。请根据文档内容生成简洁准确的中文章节标题。

${r}`,stream:!1})}),!l.ok)throw new Error(`API error: ${l.status}`);const h=await l.json();let f="";a.isOpenAiFormat?f=((i=(s=(o=h.choices)==null?void 0:o[0])==null?void 0:s.message)==null?void 0:i.content)||"":f=h.response||"";const d=[],p=f.split(`
`).filter(v=>v.trim());let g=2;for(const v of p){const m=v.match(/^(.+?)\s*\(?(\d+)\)?$/);if(m){d.push({title:m[1].trim(),pageNumber:g});const b=d.length-1;b<e.length&&(g+=Math.max(1,e[b].pageCount))}}if(d.length===0){g=2;for(const v of e){const m=v.name.replace(/\.pdf$/i,"").trim();d.push({title:m,pageNumber:g}),g+=Math.max(1,v.pageCount)}}return t==null||t("目录生成完成",100),d}catch(a){console.error("目录生成失败:",a),t==null||t("目录生成失败",100);const l=[];let h=2;for(const f of e){const d=f.name.replace(/\.pdf$/i,"").trim();l.push({title:d,pageNumber:h}),h+=Math.max(1,f.pageCount)}return l}}async function pa(e,t){const n=new Map;for(let r=0;r<e.length;r++){const o=e[r];t==null||t(o.name,r/e.length*100);try{const s=await ua(o.file),i=await fa(s,o.name,()=>{t==null||t(o.name,(r+.5)/e.length*100)});i.pdfId=o.id,n.set(o.id,i)}catch(s){console.error(`处理 ${o.name} 失败:`,s)}}return t==null||t("完成",100),n}function ga({files:e,onUpdateFile:t,onUpdateOptions:n,tocEntries:r,disabled:o}){const[s,i]=u.useState(!1),[a,l]=u.useState(!1),[h,f]=u.useState(null),[d,p]=u.useState(new Set),[g,v]=u.useState([]),[m,b]=u.useState(!1),w=u.useCallback(async()=>{if(!(e.length===0||s)){i(!0),f({fileName:"准备中...",percent:0}),p(new Set);try{(await pa(e.map(x=>({id:x.id,file:x.file,name:x.name})),(x,y)=>{f({fileName:x,percent:y})})).forEach((x,y)=>{t(y,{summary:x.summary,keyPoints:x.keyPoints}),p(M=>new Set([...M,y]))})}catch(C){console.error("批量生成摘要失败:",C)}finally{i(!1),f(null)}}},[e,s,t]),S=u.useCallback(async()=>{if(e.length===0||a)return;if(e.filter(x=>x.summary).length===0){alert("请先生成摘要后再生成目录");return}l(!0),f({fileName:"正在生成目录...",percent:50});try{const x=await ha(e.map(y=>({id:y.id,name:y.name,summary:y.summary||"",pageCount:y.pageCount})),(y,M)=>{f({fileName:y,percent:M})});n(y=>({...y,tocEntries:x})),v(x),b(!0),f({fileName:"目录生成完成",percent:100})}catch(x){console.error("生成目录失败:",x)}finally{l(!1),setTimeout(()=>f(null),2e3)}},[e,a,n]),N=u.useCallback((C,x)=>{const y=[...g];y[C]={...y[C],...x},v(y),n(M=>({...M,tocEntries:y}))},[g,n]),k=u.useCallback(C=>{const x=g.filter((y,M)=>M!==C);v(x),n(y=>({...y,tocEntries:x}))},[g,n]),R=u.useCallback(()=>{const C={title:"新章节",pageNumber:g.length>0?g[g.length-1].pageNumber+1:2},x=[...g,C];v(x),n(y=>({...y,tocEntries:x}))},[g,n]);return c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[c.jsx(an,{className:"w-4 h-4 text-purple-600"}),"AI 智能功能"]}),c.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," 个文件"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:w,disabled:o||s||e.length===0,className:ue("w-full py-2 px-4 rounded-lg flex items-center justify-center gap-2 text-sm font-medium transition-colors",s?"bg-purple-100 text-purple-700 cursor-wait":"bg-purple-600 text-white hover:bg-purple-700"),children:s?c.jsxs(c.Fragment,{children:[c.jsx(ct,{className:"w-4 h-4 animate-spin"}),h?`${Math.round(h.percent)}%`:"处理中..."]}):c.jsxs(c.Fragment,{children:[c.jsx(an,{className:"w-4 h-4"}),"生成中文摘要"]})}),c.jsx("button",{onClick:S,disabled:o||a||d.size===0,className:ue("w-full py-2 px-4 rounded-lg flex items-center justify-center gap-2 text-sm font-medium transition-colors",a?"bg-blue-100 text-blue-700 cursor-wait":d.size===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:a?c.jsxs(c.Fragment,{children:[c.jsx(ct,{className:"w-4 h-4 animate-spin"}),h?`${Math.round(h.percent)}%`:"处理中..."]}):c.jsxs(c.Fragment,{children:[c.jsx(sn,{className:"w-4 h-4"}),"生成中文目录"]})})]}),h&&c.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ct,{className:"w-3 h-3 animate-spin"}),c.jsx("span",{children:h.fileName})]}),c.jsx("div",{className:"mt-1 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300",style:{width:`${h.percent}%`}})})]}),d.size>0&&c.jsx("div",{className:"mt-3 p-2 bg-green-50 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[c.jsx(Rn,{className:"w-4 h-4"}),c.jsxs("span",{children:["已为 ",d.size," 个文件生成摘要"]})]})}),c.jsx("div",{className:"mt-4 space-y-2 max-h-60 overflow-y-auto",children:e.map(C=>c.jsxs("div",{className:ue("p-3 rounded-lg border text-sm",d.has(C.id)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"),children:[c.jsx("div",{className:"font-medium text-gray-800 truncate",children:C.name}),C.summary?c.jsxs("div",{className:"mt-1 text-gray-600",children:[c.jsx("div",{className:"text-xs font-medium text-purple-600 mb-1",children:"摘要"}),c.jsx("p",{className:"text-xs line-clamp-2",children:C.summary}),C.keyPoints&&C.keyPoints.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("div",{className:"text-xs font-medium text-purple-600",children:"要点"}),c.jsx("ul",{className:"mt-1 space-y-1",children:C.keyPoints.slice(0,3).map((x,y)=>c.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-1",children:[c.jsx("span",{className:"text-purple-400",children:"•"}),c.jsx("span",{className:"line-clamp-1",children:x})]},y))})]})]}):c.jsx("div",{className:"mt-1 text-xs text-gray-400",children:d.has(C.id)?"摘要生成中...":"未生成摘要"})]},C.id))}),r.length>0&&c.jsxs("div",{className:"mt-4 border-t pt-4",children:[c.jsxs("button",{onClick:()=>b(!m),className:"flex items-center justify-between w-full text-left",children:[c.jsxs("span",{className:"font-medium text-gray-800 flex items-center gap-2",children:[c.jsx(sn,{className:"w-4 h-4 text-blue-600"}),"目录预览 (",r.length," 项)"]}),m?c.jsx(Nr,{className:"w-4 h-4 text-gray-400"}):c.jsx(Sr,{className:"w-4 h-4 text-gray-400"})]}),m&&c.jsxs("div",{className:"mt-3 space-y-2 max-h-64 overflow-y-auto",children:[r.map((C,x)=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[c.jsxs("span",{className:"w-6 text-xs text-gray-400",children:[x+1,"."]}),c.jsx("input",{type:"text",value:C.title,onChange:y=>N(x,{title:y.target.value}),className:"flex-1 text-sm border rounded px-2 py-1",placeholder:"章节标题"}),c.jsx("span",{className:"text-xs text-gray-400",children:"页码"}),c.jsx("input",{type:"number",value:C.pageNumber,onChange:y=>N(x,{pageNumber:parseInt(y.target.value)||1}),className:"w-16 text-sm border rounded px-2 py-1",min:"1"}),c.jsx("button",{onClick:()=>k(x),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:c.jsx(Dn,{className:"w-4 h-4"})})]},x)),c.jsxs("button",{onClick:R,className:"flex items-center gap-1 w-full p-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg",children:[c.jsx(Or,{className:"w-4 h-4"}),"添加章节"]})]})]}),c.jsx("p",{className:"mt-3 text-xs text-gray-500",children:'提示：先生成摘要，再点击"生成中文目录"，目录将添加到合并后的PDF开头。'})]})}const Et="pdf-merger-api-key";function ma({onKeyChange:e}){const[t,n]=u.useState(""),[r,o]=u.useState(!1),[s,i]=u.useState(!1),[a,l]=u.useState("");u.useEffect(()=>{const p=localStorage.getItem(Et);p&&(n(p),ut(p),i(!0))},[]);const h=()=>{if(!t.trim()){l("Please enter an API key");return}if(t.length<10){l("API key seems too short");return}localStorage.setItem(Et,t),ut(t),i(!0),l(""),e==null||e()},f=()=>{localStorage.removeItem(Et),n(""),ut(""),i(!1),l(""),e==null||e()},d=da()||s;return c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Tr,{className:"w-4 h-4 text-gray-600"}),c.jsx("h3",{className:"font-medium text-gray-800",children:"API Key Configuration"}),d?c.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600 ml-auto",children:[c.jsx(kr,{className:"w-3 h-3"}),"Configured"]}):c.jsxs("span",{className:"flex items-center gap-1 text-xs text-amber-600 ml-auto",children:[c.jsx(jn,{className:"w-3 h-3"}),"Required"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"SiliconFlow API Key"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:r?"text":"password",value:t,onChange:p=>{n(p.target.value),i(!1),l("")},placeholder:"sk-...",className:ue("w-full px-3 py-2 pr-20 border rounded-lg text-sm",a?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500","focus:outline-none focus:ring-2")}),c.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:c.jsx("button",{type:"button",onClick:()=>o(!r),className:"p-1 text-gray-400 hover:text-gray-600",children:r?c.jsx(jr,{className:"w-4 h-4"}):c.jsx(Dr,{className:"w-4 h-4"})})})]}),a&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:a})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:h,disabled:!t.trim(),className:ue("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",s?"bg-green-100 text-green-700":"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-300"),children:s?"Saved":"Save"}),s&&c.jsx("button",{onClick:f,className:"px-3 py-1.5 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100",children:"Clear"})]}),c.jsx("div",{className:"pt-2 border-t",children:c.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an API key?"," ",c.jsxs("a",{href:"https://siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-0.5",children:["Get free API key",c.jsx(Rr,{className:"w-3 h-3"})]})]})})]})]})}const ba="/fonts/NotoSansSC-Regular.woff2";let it=null;async function xa(){var e;if(it)return it;try{const t=await Nn(()=>import("./browser-module-CQxi5vtm.js"),__vite__mapDeps([0,1])),n=t.create||((e=t.default)==null?void 0:e.create);if(!n)throw new Error("fontkit create function not found");return it={create:n},it}catch(t){throw console.error("[Font] Failed to load fontkit:",t),t}}function va(){return typeof window<"u"}let lt=null;async function ya(e){if(typeof window>"u")throw new Error("Chinese font loading is not supported on server");if(lt)return lt;try{const t=await xa();e.fontkit=t;const n=new URL(ba,window.location.origin).toString(),r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch font: ${r.status}`);const o=await r.arrayBuffer();return lt=await e.embedFont(o),lt}catch(t){throw console.error("[Font] Failed to load Chinese font:",t),t}}async function wa(e){const t=await e.arrayBuffer();return{pageCount:(await Mt.load(t,{ignoreEncryption:!0})).getPageCount()}}async function rr(e,t){const n=await Mt.create(),r=[];t.generateTOC&&r.push({name:"TOC Page",pageNumber:1});let o=t.generateTOC?2:1;for(const s of e)r.push({name:s.name,pageNumber:o,summary:s.summary}),o+=s.pageCount;t.generateTOC&&t.tocEntries&&await Ca(n,t.tocEntries);for(const s of e){const i=await s.file.arrayBuffer(),a=await Mt.load(i),l=a.getPageIndices();(await n.copyPages(a,l)).forEach(f=>{if(t.autoRotate){const d=f.getRotation().angle;d!==0&&f.setRotation(xr(d))}n.addPage(f)})}return n}async function Ca(e,t){if(t.length===0)return;const n=await ya(e),r=await e.embedFont(vr.Helvetica),o=595.28,s=841.89,i=50,a=50,l=50,h=50,f=28;let d=e.addPage([o,s]),p=s-l;d.drawText("目 录",{x:i,y:p,size:32,font:n,color:we(.2,.2,.2)}),p-=30,d.drawLine({start:{x:i,y:p},end:{x:o-a,y:p},thickness:2,color:we(.3,.3,.3)}),p-=25;for(const m of t){p<h+50&&(d=e.addPage([o,s]),p=s-l,d.drawText("目 录（续）",{x:i,y:p,size:28,font:n,color:we(.2,.2,.2)}),p-=40,d.drawLine({start:{x:i,y:p},end:{x:o-a,y:p},thickness:1,color:we(.5,.5,.5)}),p-=25),d.drawText(m.title,{x:i,y:p,size:14,font:n,color:we(.2,.2,.2)});const b=`${m.pageNumber}`,w=r.widthOfTextAtSize(b,11),S=i+n.widthOfTextAtSize(m.title,14)+10,N=o-a-w-10,k=Math.max(1,Math.floor((N-S)/8));for(let R=0;R<k;R++)d.drawCircle({x:S+R*8,y:p+5,size:1.5,color:we(.6,.6,.6)});d.drawText(b,{x:o-a-w,y:p,size:11,font:r,color:we(.2,.4,.8)}),p-=f}const g=e.getPages(),v=g.length;for(let m=0;m<g.length;m++){const b=g[m],w=`第 ${m+1} 页 / 共 ${v} 页`,S=n.widthOfTextAtSize(w,9);b.drawText(w,{x:(o-S)/2,y:h-10,size:9,font:n,color:we(.5,.5,.5)})}}async function or(e){const t=await e.save();return new Blob([t],{type:"application/pdf"})}const Sa=Object.freeze(Object.defineProperty({__proto__:null,canUseChineseFont:va,generatePdfBlob:or,getPdfInfo:wa,mergePdfs:rr},Symbol.toStringTag,{value:"Module"}));function Na(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[o,s]=u.useState({autoRotate:!0,generateTOC:!0,tocEntries:[]});u.useEffect(()=>{const d=localStorage.getItem("pdf-merger-api-key");d&&ut(d)},[]);const i=u.useCallback(d=>{t(p=>[...p,...d]),!n&&d.length>0&&r(d[0])},[n]),a=u.useCallback(d=>{t(p=>p.filter(g=>g.id!==d)),(n==null?void 0:n.id)===d&&r(null)},[n]),l=u.useCallback(d=>{t(d)},[]),h=u.useCallback((d,p)=>{t(g=>g.map(v=>v.id===d?{...v,...p}:v))},[]),f=u.useCallback(async()=>{if(e.length===0)throw new Error("No files to merge");const d=await rr(e,{...o,tocEntries:o.generateTOC?o.tocEntries:void 0});return or(d)},[e,o]);return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("header",{className:"bg-white border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(Pt,{className:"w-6 h-6 text-blue-600"})}),c.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"PDF Merger"})]})})}),c.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[c.jsx(go,{onFilesAdded:i}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsx("h2",{className:"font-medium text-gray-800 mb-3",children:"Files"}),c.jsx(na,{files:e,onRemove:a,onReorder:l,onSelect:r,selectedId:n==null?void 0:n.id})]}),c.jsx(ma,{})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsx(ga,{files:e,onUpdateFile:h,onUpdateOptions:s,tocEntries:o.tocEntries||[]}),c.jsx(oa,{options:o,onChange:s}),c.jsx(ra,{files:e,options:o,onMerge:f}),c.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[c.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Tips"}),c.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:"1. Drag & drop PDF files to upload"}),c.jsx("li",{children:"2. Enter your API key to enable AI features"}),c.jsx("li",{children:"3. Drag files to reorder"}),c.jsx("li",{children:"4. Click merge to download"})]})]})]})]})})]})}At.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(Na,{})}));
